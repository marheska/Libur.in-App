const CACHE_NAME="liburin-app-v1",ASSETS_TO_CACHE=["index.html","app.bundle.js","manifest.json","favicon.ico","favicon.png","images/logo.png","images/blue-background.png","images/marker-icon-2x.png","images/marker-shadow.png"];self.addEventListener("install",(e=>{e.waitUntil(caches.open(CACHE_NAME).then((e=>e.addAll(ASSETS_TO_CACHE)))),self.skipWaiting()})),self.addEventListener("activate",(e=>{e.waitUntil(caches.keys().then((e=>Promise.all(e.filter((e=>e!==CACHE_NAME)).map((e=>caches.delete(e))))))),self.clients.claim()})),self.addEventListener("fetch",(e=>{e.respondWith(caches.match(e.request).then((i=>i||fetch(e.request))))})),self.addEventListener("push",(e=>{let i={};e.data&&(i=e.data.json());const n=i.title||"Libur.in App",t={body:i.body||"Ada notifikasi baru!",icon:"images/logo.png",badge:"images/logo.png",data:i.url||"/"};e.waitUntil(self.registration.showNotification(n,t))})),self.addEventListener("notificationclick",(e=>{e.notification.close();const i=e.notification.data||"/";e.waitUntil(clients.matchAll({type:"window",includeUncontrolled:!0}).then((e=>{for(let n of e)if(n.url.includes(i)&&"focus"in n)return n.focus();if(clients.openWindow)return clients.openWindow(i)})))}));